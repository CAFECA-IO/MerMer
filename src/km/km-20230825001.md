---
date: 1692953015
title: '撰寫加密貨幣交易所現金流量表指南'
description: '本文將介紹現金流量表的本質，以及製作現金流量表的方法，接著一一用直接法呈現加密貨幣交易所的營運活動造成的現金流量表變化，期望達到示範作用並引起更多加密貨幣交易所監管相關的討論。'
picture: '/km/cash-flow-statements-img.jpg'
category: ['KM_CATEGORY.FINANCIALS', 'KM_CATEGORY.CASH_FLOW_STATEMENT']
authorId: 'shirley'
---

# 加密貨幣交易所的現金流量表撰寫指南

本文將介紹現金流量表的本質，以及製作現金流量表的方法，接著一一用直接法呈現加密貨幣交易所的營運活動造
成的現金流量表變化，期望達到示範作用並引起更多加密貨幣交易所監管相關的討論。

# 什麼是現金流量表（現金流量表的重要性跟作用）

現金流量表是一份財務報表，詳細記錄了一家公司在特定時期的現金收入和支出（變化）。它的主要作用是：

- 提供清晰的現金流動概覽：幫助公司了解在特定時期內，現金是如何進出的。
- 評估公司的營運能力：通過觀察現金流量，可以判斷公司是否有足夠的現金來支付日常運營。
- 投資決策的參考：對於投資者來說，現金流量表可以提供公司財務健康狀況的重要資訊。

# 加密貨幣交易所的特色（與一般交易所相比）

加密貨幣交易所是一個允許用戶買賣數位貨幣的平台。與一般交易所相比，它有以下特色：

- 數位資產交易：主要交易的是數位貨幣，如比特幣、以太幣等。
- 高度的網路安全需求：因為交易的是數位資產，所以需要更高的網路安全措施。
- 特殊的儲存方式：例如冷錢包（不連接網路的儲存方式）和熱錢包（連接網路的儲存方式）。
- 法規環境的不確定性：加密貨幣的法規在許多國家仍在發展中，因此交易所需要持續適應。

# 加密貨幣交易所的營運活動

列出交易所基本服務後，下文接著用這些營運活動舉例，描述各個活動造成的現金流量表變化。

- 入金
  - 法幣入金
  - 加密貨幣入金
- 出金
  - 法幣出金
  - 加密貨幣出金
- 現貨交易
- CFD 交易
- 永續期貨合約

# 製作加密貨幣交易所的現金流量表需要的資料及對應的會計科目

## 營運活動 (Operating Activities)

- User deposit: 用戶的法幣存款
- User crypto deposit: 用戶的加密貨幣存款
- User withdrawal: 用戶的法幣提款
- User crypto withdrawal: 用戶的加密貨幣提款
- Cryptocurrencies: 交易所持有的加密貨幣，不包含與有美元儲備的(US Dollar backed)、被廣泛認同的穩定幣
  如 USDT 及 USDC
  - US dollar backed 有美元儲備
    - Being backed by the US dollar provides a level of trust and assurance to holders that they can
      redeem their assets for US dollars.
    - 宣稱每發行一個穩定幣，背後就有一塊美元支持的加密貨幣有 USDC、USDT、BUSD
  - US dollar pegged 與美元掛鉤
    - An asset or currency is said to be pegged to the US dollar when its value is intentionally
      kept at a fixed rate or within a specific range relative to the US dollar.
    - 用一籃子的加密貨幣或演算法來盡量達成與美元 1:1 兌換的加密貨幣有 Dai、UST
- Cash received from customers: 從用戶那邊賺到的現金及約當現金
- Cash paid to customers: 支付給用戶的現金及約當現金
- Cash paid to suppliers: 支付給供應商的現金及約當現金
- USDT received from customers: 從用戶那邊賺到的 USDT
- USDT paid to customers: 支付給用戶的 USDT
- USDT: 交易所持有的 USDT
- USDC: 交易所持有的 USDC
- Purchase of cryptocurrencies: 用法幣購買加密貨幣
- Disposal of cryptocurrencies: 賣掉加密貨幣獲得法幣
- Insurance Fund for Perpetual Contracts: 為了保證永續合約正常運作的基金

## 投資活動 (Investing Activities)

- 略

## 籌資活動 (Financing Activities)

- 從發行普通股所得的資金( _Proceeds from issuance of common stock_ or _Cash received from issuing
  common stock_ )
- 長期債務 (Long-Term Debt): 債務的增加或減少
- 短期借款 (Short-Term Borrowings): 債務的增加或減少
- 股利的支付 (Payments of dividends)
- 庫藏股 (Treasury Stock): 購買或出售自家股票

## 非現金的營運活動補充 (Supplemental schedule of non-cash operating activities)

- 用穩定幣購買加密貨幣(Purchase of cryptocurrencies with non-cash consideration)，例如用 USDT 買 BTC
- 賣掉加密貨幣獲得穩定幣(Disposal of cryptocurrencies for non-cash consideration)，例如賣掉 BTC 持有
  USDT
- Insurance Fund for Perpetual Contracts with non-cash consideration: 為了保證永續合約正常運作的基金
  ，以加密貨幣形式
- USDT received from customers: 從用戶那邊賺到的 USDT
- USDT paid to customers: 支付給用戶的 USDT

# 現金流量表的製作方法和注意事項

- 投資活動和籌資活動的直接法比較容易理解，因為它們直接反映了資產和負債的變動。而間接法則需要將資產和
  負債的變動轉換成現金流量的影響，這可能比較複雜和不直觀。以下例子皆為營運活動

## 直接法

透過各個活動的實際資料，列出具體現金收入跟支出，直接製作現金流量表。

## 間接法

從淨利開始，調整非現金項目和營運資本的變動。

間接法的步驟如下：

1. 從損益表中取得交易所的淨利（損）。
2. 將非現金項目（如折舊、攤銷、存貨減值等）加回淨利（損）。
3. 將與營運活動相關的資產和負債變動（如應收帳款、預付款項、應付帳款等）調整到淨利（損）中。
4. 得到營運活動的淨現金流量。

## 例子

直接法：

營運活動現金流量：

1. 交易收入：$15,000
2. 其他營運支出：-$10,000

營運活動淨現金流量：$5,000

---

間接法：

營運活動現金流量：

1. 月淨利：$5,000 (這是存款手續費和 CFD 交易收入減去所有支出)
2. 調整項目：
   - 非現金支出：$0
   - 交易收入已包含在淨利中
   - 其他營運支出已在淨利中扣除

營運活動淨現金流量：$5,000

## 驗算

1. 計算期初和期末的現金餘額。期初的現金餘額是指報告期間開始時交易所持有的現金和等價物（如銀行存款、
   短期投資等）。期末的現金餘額是指報告期間結束時交易所持有的現金和等價物。這兩個數字可以從交易所的
   資產負債表中獲得。
2. 計算期間內的淨增減現金餘額。將三大類現金流動的淨額相加，得到期間內的淨增減現金餘額。這個數字應該
   與期初和期末的現金餘額之差相等，以檢驗現金流量表的準確性。

---

# 現金流量表營運活動實例 (直接法)

## 法幣入金

- 指定期間內，用戶總共入金 1000 USD
  - 交易所流入 1000 美元

Cash flows from operating activities:

User deposit：$1,000

---

## 加密貨幣入金

- 指定期間內，用戶總共入金 1 ETH ，1 ETH= 1000 USD
  - 交易所流入 1000 美元價值的 ETH

Cash flows from operating activities:

User crypto deposit：$1,000

---

## 法幣出金

- 指定期間內，用戶總共出金 1000 USD

Cash flows from operating activities:

User withdrawal：($1,000)

---

## 加密貨幣出金

- 指定期間內，用戶總共出金 1 ETH (價值一千美元)

Cash flows from operating activities:

User crypto withdrawal：($1,000)

---

## 現貨交易

### 交易所跟用戶都用 USD 買賣 BTC

- 指定期間內，交易所自己斷斷續續用 USD 逢低買進 BTC，總共買入 10 BTC；用戶總共用 USD 下單買 5 BTC 跟
  賣 1 BTC
  - 粗淺地假設交易所買入 10 BTC 時匯率為 900 USD/BTC，用戶買入時匯率為 1000 USD/BTC，用戶賣出時匯率
    為 800 USD/BTC，財報結算時的匯率為 800 USD/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)
  - 附帶一提，資產負債表下的紀錄可能長這樣：
    - 用戶 5x1000-1x800=5000-800=4200 總共買入 4200 美元價值的 3 BTC，代表交易所賣出 4200 美元價值的
      3 BTC
    - 交易所持有 10-3= 7 BTC， 7x800=5600 美元
    - 保留盈餘為 5x1000x0.01 + 1x800x0.01=58 美元

### 過程

- 交易所自己總共買入 10 BTC
  - 加上別的交易所的點差 0.1 %，現金流出了 9009 美元，因為購買了 10 BTC

Cash flows from operating activities:

Cryptocurrencies: $9,000

Purchase of cryptocurrencies: ($9,009)

- 用戶在交易所買入 5 BTC
  - 加上我們交易所的點差 1 %，現金流入 5050 美元，將價值 5000 美元的 BTC 賣給用戶

Cash flows from operating activities:

Cryptocurrencies: ($5,000)

Disposal of cryptocurrencies: $5,050

- 用戶在交易所賣出 1 BTC
  - 加上我們交易所的點差 1 %，現金流出了 792 美元，跟用戶買的 1 BTC

Cash flows from operating activities:

Cryptocurrencies: $800

Purchase of cryptocurrencies: ($792)

### 結果

- 這段期間的現金流量表
  - 總共賺得 4800-9801+5050=49 美元

Cash flows from operating activities:

Cryptocurrencies: $4,800

Purchase of cryptocurrencies: ($9,801)

Disposal of cryptocurrencies: $5,050

NET CASH FLOW FROM OPERATING ACTIVITIES: $49

---

### 交易所跟用戶都用 USDT 買賣 BTC

- 指定期間內，交易所自己斷斷續續用 USDT 逢低買進 BTC，總共買入 10 BTC；用戶總共用 USD 下單買 5 BTC
  跟賣 1 BTC
  - 粗淺地假設交易所買入 10 BTC 時匯率為 900 USDT/BTC，用戶買入時匯率為 1000 USDT/BTC，用戶賣出時匯
    率為 800 USDT/BTC，財報結算時的匯率為 800 USDT/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1
    USDT = 1 USD

### 過程

- 交易所自己總共買入 10 BTC
  - 加上別的交易所的點差 0.1 %，現金流出了 9009 USDT，因為購買了 10 BTC

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: $9,000

Purchase of cryptocurrencies with non-cash consideration: ($9,009)

- 用戶在交易所買入 5 BTC
  - 加上我們交易所的點差 1 %，現金流入 5050 USDT，因為將價值 5000 美元的 BTC 賣給用戶

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: ($5,000)

Disposal of cryptocurrencies for non-cash consideration: $5,050

- 用戶在交易所賣出 1 BTC
  - 加上我們交易所的點差 1 %，現金流出了 792 USDT，因為跟用戶買的 1 BTC

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: $800

Purchase of cryptocurrencies with non-cash consideration: ($792)

### 結果

- 這段期間的現金流量表
  - 4800-9801+5050=49

非現金的營運活動補充 (Supplemental schedule of non-cash operating activities)：

Cryptocurrencies: $4,800

Purchase of cryptocurrencies with non-cash consideration: ($9,801)

Disposal of cryptocurrencies for non-cash consideration: $5,050

NET CASH FLOW FROM NON-CASH OPERATING ACTIVITIES: $49

---

## CFD 交易

### 用戶用 USD 做多做空 BTC，倉位皆已清算

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USD；用戶幾乎同時開 5 BTC 價值 5000 美元的多單，
  開 2 BTC 價值 2000 美元空單，槓桿為 5 倍，皆已關倉
  - 用戶做多匯率為 1000 USD/BTC，用戶做空匯率為 1000 USD/BTC，用戶關倉時匯率為 800 USD/BTC，財報結算
    時匯率 800 USD/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT = 1 USD，強制平倉手續費為
    0.01%，手續費為 0
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所本身的 10 BTC 跟 10000 USD 流動性足夠，故沒有另外買賣 BTC

### 過程

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金 1010 美元
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，由交易所執行強制平倉，交易所
    吸收強制平倉手續費
- 空單
  - 保證金為 2x1000x0.99/5=$396，(-(800x1.01-1000))x2=384
    - 空單關倉時用戶拿回保證金 396 美元跟獲利 384 美元

### 結果

- 這段期間的現金流量表
  - 1010-384=626

Cash flows from operating activities:

Cash received from customers: $1010

Cash paid to customers: ($384)

NET CASH FLOW FROM OPERATING ACTIVITIES: $626

---

### 交易所用 USD 買 BTC，用戶用 USD 做 CFD 交易，倉位皆已關倉

- 指定期間內，交易所本身資產(狀態)有 3 BTC，10,000 USD，又陸續總共買了 1 BTC；用戶幾乎同時開 5 BTC
  價值 5000 美元的多單，開 2 BTC 價值 2000 美元空單，槓桿為 5 倍，皆已關倉
  - 交易所買 BTC 的匯率為 900 USD/BTC，用戶做多匯率為 1000 USD/BTC，用戶做空匯率為 1000 USD/BTC，用
    戶關倉時匯率為 800 USD/BTC，財報結算時匯率 800 USD/BTC，交易所點差固定為 2 %，單向為
    (2%/2=0.01)，1 USDT = 1 USD，強制平倉手續費為 0.01%，手續費為 0
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所買入 1 BTC 以確保資產價值

### 過程

- 交易所總共買入 1 BTC
  - 加上別的交易所的點差 0.1 %，現金流出 900.9 美元

Cash flows from operating activities:

Cryptocurrencies: $900

Purchase of cryptocurrencies: ($900.9)

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，
- 空單
  - 保證金為 2x1000x0.99/5=$396，(-(800x1.01-1000))x2=384
    - 空單關倉時拿回保證金 396 美元跟獲利 384 美元

### 結果

- 這段期間的現金流量表
  - 1010-384-900.9+900=625.1

Cash flows from operating activities:

Cash received from customers: $626

Cryptocurrencies: $900

Purchase of cryptocurrencies: ($900.9)

NET CASH FLOW FROM OPERATING ACTIVITIES: $625.1

---

### 用戶用 USDT 做 CFD 交易，倉位皆以清算

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USDT；用戶幾乎同時開 5 BTC 價值 5000 USDT 的多單
  ，開 2 BTC 價值 2000USDT 空單，槓桿為 5 倍，皆已關倉
  - 用戶做多匯率為 1000 USDT/BTC，用戶做空匯率為 1000 USDT/BTC，用戶關倉時匯率為 800 USDT/BTC，財報
    結算時匯率 800 USDT/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT = 1 USD，強制平倉手續費
    為 0.01%，手續費為 0，1 USDT = 1 USD
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所本身的 10 BTC 跟 10000 USDT 流動性足夠，故沒有另外買賣
    BTC

### 過程

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 USDT ，
- 空單
  - 保證金為 2x1000x0.99/5=396 USDT ，(-(800x1.01-1000))x2=384 USDT
    - 空單關倉時拿回保證金 396 USDT 跟獲利 384 USDT

### 結果

- 這段期間的現金流量表
  - 1010-384=626

Supplemental schedule of non-cash operating activities：

USDT received from customers: $1010

USDT paid to customers: ($384)

NET CASH FLOW FROM NON-CASH OPERATING ACTIVITIES: $626

---

### 交易所用 USDT 買 BTC，用戶用 USDT 做 CFD 交易，倉位皆已關倉

- 指定期間內，交易所本身資產(狀態)有 3 BTC，10,000 USDT，又陸續總共買了 1 BTC；用戶幾乎同時開 5 BTC
  價值 5000 USDT 的多單，開 2 BTC 價值 2000 USDT 空單，槓桿為 5 倍，皆已關倉
  - 交易所買 BTC 的匯率為 900 USDT/BTC，用戶做多匯率為 1000 USDT/BTC，用戶做空匯率為 1000 USDT/BTC，
    用戶關倉時匯率為 800 USDT/BTC，財報結算時匯率 800 USDT/BTC，交易所點差固定為 2 %，單向為
    (2%/2=0.01)，1 USDT = 1 USD，強制平倉手續費為 0.01%，手續費為 0
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所買入 1 BTC 以確保資產價值

### 過程

- 交易所總共買入 1 BTC
  - 加上別的交易所的點差 0.1 %，現金流出 900.9 USDT

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: $900

Purchase of cryptocurrencies with non-cash consideration: ($900.9)

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，
- 空單
  - 保證金為 2x1000x0.99/5=$396，(-(800x1.01-1000))x2=384
    - 空單關倉時拿回保證金 396 美元跟獲利 384 美元

### 結果

- 這段期間的現金流量表
  - USDT: -900.9+626=-274.9
  - 900-274.9=625.1

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: $900

Purchase of cryptocurrencies with non-cash consideration: ($900.9)

USDT received from customers: $1010

USDT paid to customers: ($384)

NET CASH FLOW FROM NON-CASH OPERATING ACTIVITIES: $625.1

---

## 永續合約

永續期貨合約與傳統期貨最大的不同在於它沒有確定的到期日，允許交易者長期持有。這種合約的價格（標記價格
）基於一個指數價格，指數價格是根據主要現貨市場的平均價格計算得出的。當市場高度波動時，標記價格能避免
不當強行平倉情況，這種調整會發生。此外，交易者需要支付一定的保證金來開設和維持他們的倉位。如果市場對
他們不利，他們可能會面臨被強制平倉的風險。交易所提供了一系列工具和機制，如保險基金和自動去槓桿化，以
確保市場的穩定和交易者的資金安全。

- 指數價格由根據主要現貨市場及其相對交易量計算得出的資產平均價格構成。
  - 指數價格是一種從多個市場或交易所中提取的資產平均價格，用於反映該資產在整體市場中的真實價值。它可
    以幫助減少單一市場或交易所的價格操縱或異常波動的影響。舉例說明：假設我們想知道比特幣的指數價格。
    我們可以從幾個主要的加密貨幣交易所（如 Binance、Coinbase、Kraken 等）取得比特幣的價格，然後計算
    它們的平均價格。如果 Binance 上的比特幣價格是$50,000，Coinbase 上是$49,800，而 Kraken 上是
    $50,200，那麼比特幣的指數價格將是這三個價格的平均值，即$50,000。
- 標記價格與實際交易價格（最後價格）相比的預計合約真實價值（公允價格）

  - 計算標記價格可在市場高度波動時避免發生不當強行平倉的狀況。因此，雖然指數價格與現貨市場價格相關，
    但標記價格代表永續期貨合約的公允價值。標記價格係基於指數價格及資金費率計算得出，且是計算「未實現
    盈虧」的重要構成元素。

- 自動去槓桿化 (Auto-Deleveraging)
  - 避免用戶賺太多，交易所無法給出這麼多利潤，讓盈利的人賺少一點以補貼虧損的人
- 資金費率調整 (Funding Rate Adjustment)
  - 避免單一方體量太大，用來平衡市場的機制，資金費率為正代表做多的交易者要付錢給做空的交易者，資金費
    率為負就是做空的交易者要付錢給做多的交易者，每八小時計算一次，在關倉前會先記在帳上，關倉才會付清
    。
  - 資金費率是直接給反向交易的交易者。
- 保證金
  - 初始保證金是開設槓桿倉位時所需的最低資金，確保交易者有足夠的資金承擔潛在損失。維持保證金是維持該
    倉位所需的最低資金。當資金低於此水平時，交易者可能會被強制平倉，
- 保險基金
  - 防止虧損交易者的餘額降至零以下，同時確保正在盈利的交易者鎖定利潤。避免交易所自掏腰包來保證盈利者
    的利潤。部分基金來源自強制平倉手續費。

---

### 交易所用 USD 賣 BTC，用戶用 USD 做永續合約交易，部分倉位未關倉，多單爆倉過多的情況

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USD；用戶幾乎同時開 5 BTC 價值 5000 美元的多單，
  開 8 BTC 價值 8000 美元空單，槓桿為 5 倍，1 BTC 價值的空單倉位未關倉
  - 資金費率始終為 -0.1%，用戶做多匯率為 1000 USD/BTC，用戶做空匯率為 1000 USD/BTC，用戶關倉時匯率為
    800 USD/BTC，財報結算時匯率 800 USD/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT = 1
    USD，強制平倉手續費為 0.01%，手續費為 0
  - BTC 價格瘋狂跌，空單價值過大，交易所決定賣出 10 BTC ，賣出時匯率為 700 USD/BTC

### 過程

- 交易所賣 10 BTC
  - 加上別的交易所的點差 0.1 %，現金流入 6930 美元

Cash flows from operating activities:

Cryptocurrencies: ($7000)

Disposal of cryptocurrencies: $6930

- 資金費率由做空的人給做多的人，這段期間內的資金費率的錢由空單價值來計算，而多單交易者各自能拿到多少
  是由多單價值百分比去分配的；資金費率直接在用戶之間進行，手續費可能會短暫地停留在交易所，之後再轉交
  給該收到資金費率的用戶
  - 8x1000x0.001=8 美元

Cash flows from operating activities:

Insurance Fund for Perpetual Contracts: $8

Cash paid to customers: ($8)

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金 1010 美元
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，由交易所執行強制平倉，由保險
    基金吸收強制平倉手續費。
- 空單
  - 保證金 8x1000x0.99/5=$1584，(-(800x1.01-1000))x9=1344
    - 空單關倉時用戶拿回保證金 1980 美元跟獲利 1344 美元

### 結果

- 這段期間的現金流量表
  - 交易所沒有控制好空單價值，造成虧損 404 美元
  - Cash paid to customers: -1344-8=-1352

Cash flows from operating activities:

Cryptocurrencies: ($7000)

Disposal of cryptocurrencies: $6930

Insurance Fund for Perpetual Contracts: $8.08

Cash received from customers: $1009.92

Cash paid to customers: ($1352)

NET CASH FLOW FROM OPERATING ACTIVITIES: ($404)

---

### 用戶用 USD 做永續合約交易，部分倉位未關倉

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USD；用戶幾乎同時開 5 BTC 價值 5000 美元的多單，
  開 2 BTC 價值 2000 美元空單，槓桿為 5 倍，其中有 1 BTC 的空單未關倉
  - 資金費率始終為 0.1%，用戶做多匯率為 1000 USD/BTC，用戶做空匯率為 1000 USD/BTC，用戶關倉時匯率為
    800 USD/BTC，財報結算時匯率 800 USD/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT = 1
    USD，強制平倉手續費為 0.01%，手續費為 0
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所本身的 10 BTC 跟 10000 USD 流動性足夠，故沒有另外買賣 BTC

### 過程

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金 1010 美元
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，由交易所執行強制平倉，由保險
    基金吸收強制平倉手續費。
- 空單

  - 保證金 1x1000x0.99/5=$198，(-(800x1.01-1000))x2=192
    - 空單關倉時用戶拿回保證金 198 美元跟獲利 192 美元

- 資金費率由做多的人給做空的人，這段期間內的資金費率的錢由多單價值來計算，而空單交易者各自能拿到多少
  是由多單價值百分比去分配的；資金費率直接在用戶之間進行，手續費可能會短暫地停留在交易所，之後再轉交
  給該收到資金費率的用戶
  - 5x1000x0.001=5 美元

Cash flows from operating activities:

Insurance Fund for Perpetual Contracts: $5

Cash paid to customers: ($5)

### 結果

- 這段期間的現金流量表
  - Cash paid to customers: -192-5=-197

Cash flows from operating activities:

Cash paid to customers: ($197)

Insurance Fund for Perpetual Contracts: $5.08

Cash received from customers: $1009.92

NET CASH FLOW FROM OPERATING ACTIVITIES: $818

---

### 交易所用 USDT 賣 BTC，用戶用 USDT 做永續合約交易，部分倉位未關倉，多單爆倉過多的情況

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USDT ；用戶幾乎同時開 5 BTC 價值 5000 美元的多單
  ，開 8 BTC 價值 8000 美元空單，槓桿為 5 倍，1 BTC 價值的空單倉位未關倉
  - 資金費率始終為 -0.1%，用戶做多匯率為 1000 USDT/BTC，用戶做空匯率為 1000 USDT/BTC，用戶關倉時匯率
    為 800 USDT/BTC，財報結算時匯率 800 USDT/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT =
    1 USD，強制平倉手續費為 0.01%，手續費為 0
  - BTC 價格瘋狂跌，空單價值過大，交易所決定賣出 10 BTC ，賣出時匯率為 700 USDT/BTC

### 過程

- 交易所賣 10 BTC
  - 加上別的交易所的點差 0.1 %，現金流入 6930 美元

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: ($7000)

Disposal of cryptocurrencies with non-cash consideration: $6930

- 資金費率由做空的人給做多的人，這段期間內的資金費率的錢由空單價值來計算，而多單交易者各自能拿到多少
  是由多單價值百分比去分配的；資金費率直接在用戶之間進行，手續費可能會短暫地停留在交易所，之後再轉交
  給該收到資金費率的用戶
  - 8x1000x0.001=8 美元

Supplemental schedule of non-cash operating activities：

Insurance Fund for Perpetual Contracts with non-cash consideration: $8

USDT paid to customers: ($8)

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金 1010 美元
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，由交易所執行強制平倉，由保險
    基金吸收強制平倉手續費。
- 空單
  - 保證金 8x1000x0.99/5=$1584，(-(800x1.01-1000))x9=1344
    - 空單關倉時用戶拿回保證金 1980 美元跟獲利 1344 美元

### 結果

- 這段期間的現金流量表
  - 交易所沒有控制好空單價值，造成虧損 404 美元
  - Cash paid to customers: -1344-8=-1352

Supplemental schedule of non-cash operating activities：

Cryptocurrencies: ($7000)

Disposal of cryptocurrencies: $6930

Insurance Fund for Perpetual Contracts with non-cash consideration: $8.08

USDT received from customers: $1009.92

USDT paid to customers: ($1352)

NET CASH FLOW FROM NON-CASH OPERATING ACTIVITIES: ($404)

---

### 用戶用 USDT 做永續合約交易，部分倉位未關倉

- 指定期間內，交易所本身資產(狀態)有 10 BTC，10,000 USD；用戶幾乎同時開 5 BTC 價值 5000 美元的多單，
  開 2 BTC 價值 2000 美元空單，槓桿為 5 倍，其中有 1 BTC 的空單未關倉
  - 資金費率始終為 0.1%，用戶做多匯率為 1000 USD/BTC，用戶做空匯率為 1000 USD/BTC，用戶關倉時匯率為
    800 USD/BTC，財報結算時匯率 800 USD/BTC，交易所點差固定為 2 %，單向為(2%/2=0.01)，1 USDT = 1
    USD，強制平倉手續費為 0.01%，手續費為 0
  - 多空沖銷後，剩下 5-2=3 BTC 多單，交易所本身的 10 BTC 跟 10000 USD 流動性足夠，故沒有另外買賣 BTC

### 過程

- 保證金為涵蓋點差的價格除以槓桿
- 多單
  - 保證金為 5x1000x1.01/5=$1010，((800-1000)/1000)x5=-1 觸及強制平倉價，損失所有保證金 1010 美元
  - 強制平倉價格 1000x(1-0.2)x1.0001=800.08，強制平倉手續費 0.08 美元，由交易所執行強制平倉，由保險
    基金吸收強制平倉手續費。
- 空單

  - 保證金 1x1000x0.99/5=$198，(-(800x1.01-1000))x2=192
    - 空單關倉時用戶拿回保證金 198 美元跟獲利 192 美元

- 資金費率由做多的人給做空的人，這段期間內的資金費率的錢由多單價值來計算，而空單交易者各自能拿到多少
  是由多單價值百分比去分配的；資金費率直接在用戶之間進行，手續費可能會短暫地停留在交易所，之後再轉交
  給該收到資金費率的用戶
  - 5x1000x0.001=5 美元

Supplemental schedule of non-cash operating activities：

Insurance Fund for Perpetual Contracts with non-cash consideration: $5

USDT paid to customers: ($5)

### 結果

- 這段期間的現金流量表
  - Cash paid to customers: -192-5=-197

Supplemental schedule of non-cash operating activities：

USDT paid to customers: ($197)

Insurance Fund for Perpetual Contracts with non-cash consideration: $5.08

USDT received from customers: $1009.92

NET CASH FLOW FROM NON-CASH OPERATING ACTIVITIES: $818

---

# 參考來源

- [幣安永續期貨合約](https://academy.binance.com/zt/articles/what-are-perpetual-futures-contracts)
- [The Cash Flow Statement - Direct Method](https://accountingsuperpowers.com/financial-statements/cash-flow-statement/cash-flow-statement-direct-method/#tab-con-3)
